This document is intended to describe how one can set up an environment to run TravelMapping's site update program to generate the same logs, stats, and database file that are produced as part of TM's regular site update process.  A separate document is planned in the [Web repository](https://github.com/TravelMapping/Web/) to describe how to take the information generated by the update to populate a database and install and configure the Web-facing code to use it.  The expectation is that this is run in a Unix-like environment such as the Mac OS X Terminal, or Linux or FreeBSD.  It is likely the same or similar commands will work on Windows in something like Cygwin or Git Bash, but this has not been tested.  A [separate document](RUNNING.md) describes how to use a shell account on TravelMapping's server to test your own changes to the highway data before submitting a pull request.

### Needed Software

Standard tools expected include bash, bzip2, ssh.

The system should have a Python3 installation.  As of this writing, Python 3.6.4 is being used.  Below, we will assume that Python can be launched with the command "python3".

### Cloning Needed Repositories

Information from three repositories is needed to run the site update process:

1. [DataProcessing](https://github.com/TravelMapping/DataProcessing/)
2. [HighwayData](https://github.com/TravelMapping/HighwayData/)
3. [UserData](https://github.com/TravelMapping/UserData/)

These should be cloned into the same parent directory.  Typically, this might be called "travelmapping" and sit off the user's home directory.  Below, we will assume that directory is in an environment variable TMBASE, so we refer to it as $(TMBASE).

Once all repositories have been updated to match the latest versions on GitHub (using "git pull"), the site update program can be run.  To run the basic data processing to ensure that all data can be loaded correcly and that no other errors are encountered:

```
cd $(TMBASE)/DataProcessing/siteupdate/python-teresco
python3 siteupdate.py
```

There is also a collection of bash scripts that run this program, typically launched with

```
sh localupdate.sh
```

right on the main server.  In addition to running the siteupdate.py program, this also transfers files to the appropriate directories on the web servers and reloads the DB.
